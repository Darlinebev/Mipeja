---
import Navigation from './Navigation.astro';
import MobileNav from './MobileNav.astro';
import { hotel } from '../data/hotel';

const { bookingUrl } = Astro.props;
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 bg-transparent transition-all duration-500 py-6">
	<div class="mx-auto flex max-w-7xl items-center justify-between px-6">
		<div class="flex items-center gap-12">
			<a href="/" class="flex items-center gap-3 group">
				<div class="h-10 w-10 border border-white/30 text-white flex items-center justify-center font-display text-xl font-bold group-hover:border-gold-rich group-hover:text-gold-rich transition-colors italic logo-box">
					M
				</div>
                <div class="hidden sm:block">
                    <p class="text-xl font-display font-bold leading-none text-white tracking-widest uppercase logo-text">Mipeja</p>
                </div>
			</a>
			<div class="hidden lg:block border-l border-white/20 pl-12 nav-container">
				<Navigation />
			</div>
		</div>
		<div class="flex items-center gap-6">
			<a class="hidden md:inline-flex items-center justify-center bg-gold-rich px-8 py-4 text-[11px] font-accent font-bold text-white uppercase tracking-[0.2em] hover:bg-gold-rich/90 transition-all shadow-lg reservation-btn" href={bookingUrl || hotel.bookingUrl} target="_blank" rel="noreferrer">
				Reservation
			</a>
			<MobileNav hotelName={hotel.name} hotelLocation={hotel.location} />
		</div>
	</div>
</header>

<script>
    const header = document.getElementById('main-header');
    const logoBox = header?.querySelector('.logo-box');
    const logoText = header?.querySelector('.logo-text');
    const navLinks = header?.querySelectorAll('.nav-link');
    const navContainer = header?.querySelector('.nav-container');
    const mobileBars = header?.querySelectorAll('.mobile-menu-bar');

    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            header?.classList.add('bg-ivory', 'shadow-md', 'py-4');
            header?.classList.remove('bg-transparent', 'py-6');
            
            logoBox?.classList.add('border-charcoal-gray/20', 'text-charcoal-gray');
            logoBox?.classList.remove('border-white/30', 'text-white');
            
            logoText?.classList.add('text-charcoal-gray');
            logoText?.classList.remove('text-white');

            navContainer?.classList.add('border-charcoal-gray/20');
            navContainer?.classList.remove('border-white/20');

            navLinks?.forEach(link => {
                link.classList.add('text-charcoal-gray');
                link.classList.remove('text-white');
            });

            mobileBars?.forEach(bar => {
                bar.classList.add('bg-charcoal-gray');
                bar.classList.remove('bg-white');
            });
        } else {
            header?.classList.remove('bg-ivory', 'shadow-md', 'py-4');
            header?.classList.add('bg-transparent', 'py-6');
            
            logoBox?.classList.remove('border-charcoal-gray/20', 'text-charcoal-gray');
            logoBox?.classList.add('border-white/30', 'text-white');
            
            logoText?.classList.remove('text-charcoal-gray');
            logoText?.classList.add('text-white');

            navContainer?.classList.remove('border-charcoal-gray/20');
            navContainer?.classList.add('border-white/20');

            navLinks?.forEach(link => {
                link.classList.remove('text-charcoal-gray');
                link.classList.add('text-white');
            });

            mobileBars?.forEach(bar => {
                bar.classList.remove('bg-charcoal-gray');
                bar.classList.add('bg-white');
            });
        }
    });
</script>
