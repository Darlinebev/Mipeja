---
const { hotel, bookingUrl } = Astro.props;

const slides = [
	{
		image: '/images/mipeja-hero.jpg',
		subtitle: 'A blend of elegance and nature',
		title: 'Double Deluxe Room',
		alt: 'Double Deluxe Room'
	},
	{
		image: '/images/hero-bg.jpg',
		subtitle: 'Luxury meets comfort',
		title: 'Executive Twin Room',
		alt: 'Executive Twin Room'
	},
	{
		image: '/images/inspo.jpg',
		subtitle: 'Perfect for families',
		title: 'Family Suite',
		alt: 'Family Suite'
	}
];
---
<header role="banner" class="relative h-screen min-h-[700px] overflow-hidden flex items-center">
  <div class="absolute inset-0 z-0">
    {slides.map((slide, index) => (
      <div class={`slide absolute inset-0 transition-opacity duration-1000 ${index === 0 ? 'opacity-100' : 'opacity-0'}`} data-slide={index}>
        <img src={slide.image} alt={slide.alt} class="object-cover w-full h-full scale-105 animate-float-slow" loading={index === 0 ? "eager" : "lazy"} />
      </div>
    ))}
    <div class="absolute inset-0 bg-black/30"></div>
    <!-- Darker overlay in center for text readability -->
    <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/20"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl h-64 bg-black/40 rounded-lg blur-xl opacity-60"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6 w-full text-center">
    <div class="max-w-4xl mx-auto text-white">
      <p id="hero-subtitle" class="text-[12px] md:text-[14px] font-accent font-bold uppercase tracking-[0.5em] mb-6 animate-fade-in-down">
        A blend of elegance and nature
      </p>

      <h1 id="hero-title" class="text-6xl md:text-8xl lg:text-9xl font-display font-medium leading-[1.1] mb-12 animate-fade-in-up">
        Double Deluxe Room
      </h1>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-6 animate-fade-in-up delay-200">
        <a href={bookingUrl} target="_blank" rel="noopener noreferrer" class="bg-gold-rich hover:bg-gold-rich/90 text-white px-12 py-5 text-[14px] font-accent font-bold uppercase tracking-[0.3em] transition-all duration-300 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 rounded-sm">
          BOOK ROOM
        </a>
      </div>
    </div>
  </div>

  <!-- Slide indicators -->
  <div class="absolute bottom-24 left-1/2 -translate-x-1/2 z-10 flex space-x-3">
    {slides.map((_, index) => (
      <button class={`slide-indicator w-3 h-3 rounded-full transition-all duration-300 ${index === 0 ? 'bg-gold-rich' : 'bg-white/40'}`} data-slide={index}></button>
    ))}
  </div>

  <div class="absolute bottom-12 left-1/2 -translate-x-1/2 z-10 hidden md:block animate-bounce opacity-80">
     <div class="w-px h-20 bg-white/40 mx-auto relative after:content-[''] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-1.5 after:h-1.5 after:bg-white after:rounded-full"></div>
  </div>
</header>

<script>
  const slides = [
    {
      subtitle: 'A blend of elegance and nature',
      title: 'Double Deluxe Room'
    },
    {
      subtitle: 'Luxury meets comfort',
      title: 'Executive Twin Room'
    },
    {
      subtitle: 'Perfect for families',
      title: 'Family Suite'
    }
  ];

  let currentSlide = 0;
  const slideElements = document.querySelectorAll('.slide');
  const indicators = document.querySelectorAll('.slide-indicator');
  const subtitleElement = document.getElementById('hero-subtitle');
  const titleElement = document.getElementById('hero-title');

  function updateSlide(index) {
    // Update slide images
    slideElements.forEach((slide, i) => {
      slide.classList.toggle('opacity-100', i === index);
      slide.classList.toggle('opacity-0', i !== index);
    });

    // Update indicators
    indicators.forEach((indicator, i) => {
      indicator.classList.toggle('bg-gold-rich', i === index);
      indicator.classList.toggle('bg-white/40', i !== index);
    });

    // Update text with fade effect
    subtitleElement.style.opacity = '0';
    titleElement.style.opacity = '0';

    setTimeout(() => {
      subtitleElement.textContent = slides[index].subtitle;
      titleElement.textContent = slides[index].title;
      subtitleElement.style.opacity = '1';
      titleElement.style.opacity = '1';
    }, 300);
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % slides.length;
    updateSlide(currentSlide);
  }

  // Auto-play every 5 seconds
  setInterval(nextSlide, 5000);

  // Click indicators to change slides
  indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', () => {
      currentSlide = index;
      updateSlide(currentSlide);
    });
  });
</script>

<style>
  @keyframes float-slow {
    0%, 100% { transform: scale(1.05) translateY(0); }
    50% { transform: scale(1.1) translateY(-10px); }
  }
  .animate-float-slow {
    animation: float-slow 20s ease-in-out infinite;
  }
  .delay-200 { animation-delay: 0.2s; }
</style>
