---
import BaseLayout from "../layouts/BaseLayout.astro";
import MobileNav from "../components/MobileNav.astro";
import Hero from "../components/Hero.astro";
import Header from "../components/Header.astro";
import { hotel } from "../data/hotel";
import WifiIcon from "../components/icons/Wifi.astro";
import Parking from "../components/icons/Parking.astro";
import RestaurantIcon from "../components/icons/Restaurant.astro";
import Spa from "../components/icons/Spa.astro";
import Fitness from "../components/icons/Fitness.astro";
import Pool from "../components/icons/Pool.astro";

const pageTitle = `${hotel.name} | Boutique Stay in ${hotel.location}`;
const pageDescription = `${hotel.name} in ${hotel.location} offers warm hospitality, stylish rooms, and a secure booking experience. Discover rooms, amenities, and book your stay.`;
const bookingUrl = hotel.bookingUrl;
const featuredRooms = hotel.rooms;
---

<BaseLayout title={pageTitle} description={pageDescription}>
	<div class="min-h-screen">
		<Header bookingUrl={bookingUrl} />

		<Hero hotel={hotel} bookingUrl={bookingUrl} />

		<!-- Scrollytelling Rooms Section -->
		<section id="room-showcase" class="relative h-[300vh]">
			<div class="sticky top-0 h-screen overflow-hidden bg-ivory">
				<div id="rooms-container" class="relative h-full w-full">
					{featuredRooms.map((room, index) => (
						<div class={`room-slide absolute inset-0 w-full h-full flex items-center justify-center transition-opacity duration-700 ease-in-out ${index === 0 ? 'opacity-100 z-10' : 'opacity-0 z-0'}`} data-index={index}>
							<div class="max-w-7xl mx-auto px-6 w-full h-full flex flex-col justify-center">
								<div class="grid lg:grid-cols-2 gap-16 lg:gap-24 items-center h-full">
									<div class="space-y-10 order-2 lg:order-1">
										<div class="space-y-6">
											<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold">Luxury Experience</p>
											<h2 class="text-4xl md:text-5xl lg:text-6xl font-display text-charcoal-gray leading-tight">{room.name}</h2>
											<p class="text-charcoal-gray/70 leading-relaxed text-lg max-w-xl">
												{room.description}
											</p>
										</div>
										
										<ul class="grid grid-cols-2 gap-y-6 gap-x-4">
											{room.features.slice(0, 4).map((feature) => (
												<li class="flex items-center gap-3 text-charcoal-gray/80 font-medium">
													<span class="w-1.5 h-1.5 rounded-full bg-gold-rich"></span>
													{feature}
												</li>
											))}
										</ul>

										<div class="pt-4 space-y-8">
											<p class="text-xl font-display text-charcoal-gray">
												Phone: <a href="tel:+888-607-5000" class="hover:text-gold-rich transition-colors font-bold">+888-607-5000</a>
											</p>
											<a href={bookingUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-gold-rich hover:bg-gold-rich/90 text-white px-12 py-5 text-[14px] font-accent font-bold uppercase tracking-[0.3em] transition-all duration-300 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 rounded-sm">
												BOOK NOW
											</a>
										</div>
									</div>
									
									<div class="relative order-1 lg:order-2 h-[50vh] lg:h-auto w-full">
										<div class="aspect-[4/5] overflow-hidden rounded-sm shadow-2xl h-full w-full">
											<img src={room.image} alt={room.name} class="w-full h-full object-cover" />
										</div>
										<div class="absolute -bottom-8 -left-8 w-48 h-48 bg-gold-rich/10 -z-10 hidden md:block"></div>
									</div>
								</div>
							</div>
						</div>
					))}
				</div>
			</div>
		</section>

		<script>
			function initScroll() {
				const roomShowcase = document.querySelector('#room-showcase');
				const slides = document.querySelectorAll('.room-slide');
				
				if (!roomShowcase || slides.length === 0) return;

				window.addEventListener('scroll', () => {
					const rect = roomShowcase.getBoundingClientRect();
					const windowHeight = window.innerHeight;
					const sectionHeight = rect.height;
					
					// Calculate how far we are into the section
					// The active area is when top is between 0 (start) and -sectionHeight (end)
					// But we want to pin it. 
					// Effectively: We want to switch slides based on the scroll progress through the container.
					
					const totalScrollDistance = sectionHeight - windowHeight;
					let scrollDistance = -rect.top;
					
					if (scrollDistance < 0) scrollDistance = 0;
					if (scrollDistance > totalScrollDistance) scrollDistance = totalScrollDistance;
					
					const progress = scrollDistance / totalScrollDistance; // 0 to 1
					
					// Determine active slide index
					// We have N slides. We divide the scroll range into N segments.
					const slideCount = slides.length;
					let activeIndex = Math.floor(progress * slideCount);
					
					// Clamp index
					if (activeIndex >= slideCount) activeIndex = slideCount - 1;
					
					slides.forEach((slide, index) => {
						if (index === activeIndex) {
							slide.classList.remove('opacity-0', 'z-0');
							slide.classList.add('opacity-100', 'z-10');
						} else {
							slide.classList.remove('opacity-100', 'z-10');
							slide.classList.add('opacity-0', 'z-0');
						}
					});
				});
			}

			// Initialize
			initScroll();
			document.addEventListener('astro:page-load', initScroll);
		</script>

		<!-- Room Facilities Section -->
		<section class="py-24 md:py-32 bg-white">
			<div class="max-w-7xl mx-auto px-6">
				<div class="text-center mb-20 space-y-4">
					<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold">Thoughtful Amenities</p>
					<h2 class="text-4xl md:text-5xl font-display text-charcoal-gray">Room Facilities</h2>
					<div class="w-20 h-1 bg-gold-rich mx-auto mt-6"></div>
				</div>

				<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-12 md:gap-16">
					{[
						{ title: "Daily VIP treatment", icon: "star" },
						{ title: "Bathrooms with shower", icon: "shower" },
						{ title: "40” Smart-TV", icon: "tv" },
						{ title: "Daily access to the Spa’s", icon: "spa" },
						{ title: "Evening turndown service", icon: "moon" },
						{ title: "Coffee and tea service", icon: "coffee" },
						{ title: "Air conditioning", icon: "wind" },
						{ title: "Safety deposit box", icon: "lock" },
						{ title: "Minibar drinks", icon: "wine" },
						{ title: "24h room service", icon: "clock" },
						{ title: "Laundry service", icon: "tag" },
						{ title: "Free wifi", icon: "wifi" }
					].map((item, index) => (
						<div class={`flex flex-col items-center text-center space-y-4 group reveal`} style={`transition-delay: ${index * 0.05}s`}>
							<div class="w-16 h-16 rounded-full bg-ivory flex items-center justify-center text-gold-rich group-hover:bg-gold-rich group-hover:text-white transition-all duration-300 border border-gray-light">
								<i class={`fas fa-${item.icon} text-xl`}></i>
							</div>
							<h3 class="text-[13px] font-accent font-bold uppercase tracking-[0.2em] text-charcoal-gray">{item.title}</h3>
						</div>
					))}
				</div>
			</div>
		</section>

		<!-- Suite Highlights & Hotel Services -->
		<section class="py-24 md:py-32 bg-ivory overflow-hidden">
			<div class="max-w-7xl mx-auto px-6">
				<div class="grid md:grid-cols-2 gap-16 lg:gap-32">
					<!-- Suite Highlights -->
					<div class="space-y-12 reveal">
						<div class="space-y-4">
							<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold">The Difference</p>
							<h2 class="text-4xl font-display text-charcoal-gray">Suite Highlights</h2>
						</div>
						<ul class="space-y-6">
							{[
								"Elegant Interior Design",
								"Panoramic Views",
								"Separate Living Area"
							].map((item) => (
								<li class="flex items-start gap-4 text-lg text-charcoal-gray/80">
									<svg class="w-6 h-6 text-gold-rich flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
									<span>{item}</span>
								</li>
							))}
						</ul>
					</div>

					<!-- Hotel Services -->
					<div class="space-y-12 reveal" style="transition-delay: 0.2s">
						<div class="space-y-4">
							<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold">Guest Care</p>
							<h2 class="text-4xl font-display text-charcoal-gray">Hotel Services</h2>
						</div>
						<ul class="space-y-6">
							{[
								"Car & bicycle service",
								"Currency exchange",
								"Excursions available",
								"Souvenir & gift",
								"Transfer",
								"VIP Parking"
							].map((item) => (
								<li class="flex items-start gap-4 text-lg text-charcoal-gray/80">
									<svg class="w-6 h-6 text-gold-rich flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
									<span>{item}</span>
								</li>
							))}
						</ul>
					</div>
				</div>
			</div>
		</section>

		
	</div>
</BaseLayout>


