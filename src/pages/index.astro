---
import BaseLayout from "../layouts/BaseLayout.astro";
import MobileNav from "../components/MobileNav.astro";
import Hero from "../components/Hero.astro";
import Header from "../components/Header.astro";
import TestimonialSection from "../components/TestimonialSection.astro";
import HighlightCards from "../components/HighlightCards.astro";
import { hotel } from "../data/hotel";
import Spa from "../components/icons/Spa.astro";
import Fitness from "../components/icons/Fitness.astro";
import Pool from "../components/icons/Pool.astro";
import Clock from "../components/icons/Clock.astro";
import Shield from "../components/icons/Shield.astro";
import Gift from "../components/icons/Gift.astro";

const pageTitle = `${hotel.name} | Boutique Stay in ${hotel.location}`;
const pageDescription = `${hotel.name} in ${hotel.location} offers warm hospitality, stylish rooms, and a secure booking experience. Discover rooms, amenities, and book your stay.`;
const bookingUrl = hotel.bookingUrl;
const featuredRooms = hotel.rooms;
---

<BaseLayout title={pageTitle} description={pageDescription}>
	<div class="min-h-screen">
		<Header bookingUrl={bookingUrl} />

		<Hero hotel={hotel} bookingUrl={bookingUrl} />

		<!-- Highlight Cards Section -->
		<HighlightCards bookingUrl={bookingUrl} />

		<!-- About Us Section -->
		<section class="py-24 bg-ivory relative overflow-hidden">
			<div class="absolute inset-0 opacity-5">
				<div class="absolute top-20 left-10 w-32 h-32 bg-gold-rich rounded-full animate-float"></div>
				<div class="absolute bottom-20 right-10 w-24 h-24 bg-deep-teal rounded-full animate-float" style="animation-delay: 2s;"></div>
				<div class="absolute top-1/2 left-1/3 w-16 h-16 bg-gold-rich/50 rounded-full animate-float" style="animation-delay: 4s;"></div>
			</div>

			<div class="relative max-w-7xl mx-auto px-6">
				<div class="text-center mb-16">
					<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold mb-6 animate-fade-in-down">About Us</p>
					<h2 class="text-4xl md:text-5xl lg:text-6xl font-display text-charcoal-gray leading-tight animate-fade-in-up">
						Welcome to Mipeja Hotel – Your Comfort Hub in Busia
					</h2>
				</div>

				<div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
					<!-- Image -->
					<div class="animate-fade-in-up" style="animation-delay: 0.4s;">
						<div class="relative rounded-2xl overflow-hidden shadow-2xl">
							<img 
								src="/images/mipeja-hero.jpg" 
								alt="Mipeja Hotel - Comfortable accommodation in Busia" 
								class="w-full h-[500px] object-cover hover:scale-105 transition-transform duration-500"
								loading="lazy"
							/>
							<div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
						</div>
					</div>

					<!-- Text Content -->
					<div class="space-y-6 animate-fade-in-up" style="animation-delay: 0.2s;">
						<p class="text-charcoal-gray/70 leading-relaxed text-lg">
							Nestled in the heart of Busia, Mipeja Hotel blends comfort, convenience, and warm hospitality to give you a stay that feels just right. Whether you're traveling for business, leisure, or a quick getaway, we've got you covered.
						</p>
						<p class="text-charcoal-gray/70 leading-relaxed text-lg">
							Relax in our spacious, air-conditioned rooms, enjoy delicious meals at our on-site restaurant, or unwind in our cozy shared lounge and terrace. With free Wi-Fi, secure private parking, 24-hour front desk service, and room service available, your comfort is always our priority.
						</p>
						<p class="text-charcoal-gray/70 leading-relaxed text-lg">
							Every room features a flat-screen TV, private bathroom, fresh linens, and a workspace designed for both relaxation and productivity.
						</p>
						<p class="text-charcoal-gray/70 leading-relaxed text-lg">
							Located just 33 km from Tororo Railway Station and 41 km from Myanga Railway Station, Mipeja Hotel offers easy access to the region's key transport links. Kisumu International Airport is 104 km away.
						</p>
						<div class="pt-4">
							<h3 class="text-lg font-display text-charcoal-gray font-bold">
								Mipeja Hotel – Stay Comfortable. Feel at Home.
							</h3>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Scrollytelling Rooms Section -->
		<section id="room-showcase" class="relative h-[300vh]">
			<div class="sticky top-0 h-screen overflow-hidden bg-ivory">
				<div id="rooms-container" class="relative h-full w-full">
					{featuredRooms.map((room, index) => (
						<div class={`room-slide absolute inset-0 w-full h-full flex items-center justify-center transition-opacity duration-700 ease-in-out ${index === 0 ? 'opacity-100 z-10' : 'opacity-0 z-0'}`} data-index={index}>
							<div class="max-w-7xl mx-auto px-6 w-full h-full flex flex-col justify-center">
								<div class="grid lg:grid-cols-2 gap-16 lg:gap-24 items-center h-full">
									<div class="space-y-10 order-2 lg:order-1">
										<div class="space-y-6">
											<p class="text-[12px] uppercase tracking-[0.4em] text-deep-teal font-bold">Luxury Experience</p>
											<h2 class="text-4xl md:text-5xl lg:text-6xl font-display text-charcoal-gray leading-tight">{room.name}</h2>
											<p class="text-charcoal-gray/70 leading-relaxed text-lg max-w-xl">
												{room.description}
											</p>
										</div>
										
										<ul class="grid grid-cols-2 gap-y-6 gap-x-4">
											{room.features.slice(0, 4).map((feature) => (
												<li class="flex items-center gap-3 text-charcoal-gray/80 font-medium">
													<span class="w-1.5 h-1.5 rounded-full bg-gold-rich"></span>
													{feature}
												</li>
											))}
										</ul>

										<div class="pt-4 space-y-8">
											<p class="text-xl font-display text-charcoal-gray">
												Phone: <a href="tel:+888-607-5000" class="hover:text-gold-rich transition-colors font-bold">+888-607-5000</a>
											</p>
											<a href={bookingUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-gold-rich hover:bg-gold-rich/90 text-white px-12 py-5 text-[14px] font-accent font-bold uppercase tracking-[0.3em] transition-all duration-300 shadow-lg hover:shadow-2xl transform hover:-translate-y-1 rounded-sm">
												BOOK NOW
											</a>
										</div>
									</div>
									
									<div class="relative order-1 lg:order-2 h-[50vh] lg:h-auto w-full">
										<div class="aspect-[4/5] overflow-hidden rounded-sm shadow-2xl h-full w-full">
											<img src={room.image} alt={room.name} class="w-full h-full object-cover" />
										</div>
										<div class="absolute -bottom-8 -left-8 w-48 h-48 bg-gold-rich/10 -z-10 hidden md:block"></div>
									</div>
								</div>
							</div>
						</div>
					))}
				</div>
			</div>
		</section>

		<script>
			function initScroll() {
				const roomShowcase = document.querySelector('#room-showcase');
				const slides = document.querySelectorAll('.room-slide');
				
				if (!roomShowcase || slides.length === 0) return;

				window.addEventListener('scroll', () => {
					const rect = roomShowcase.getBoundingClientRect();
					const windowHeight = window.innerHeight;
					const sectionHeight = rect.height;
					
					// Calculate how far we are into the section
					// The active area is when top is between 0 (start) and -sectionHeight (end)
					// But we want to pin it. 
					// Effectively: We want to switch slides based on the scroll progress through the container.
					
					const totalScrollDistance = sectionHeight - windowHeight;
					let scrollDistance = -rect.top;
					
					if (scrollDistance < 0) scrollDistance = 0;
					if (scrollDistance > totalScrollDistance) scrollDistance = totalScrollDistance;
					
					const progress = scrollDistance / totalScrollDistance; // 0 to 1
					
					// Determine active slide index
					// We have N slides. We divide the scroll range into N segments.
					const slideCount = slides.length;
					let activeIndex = Math.floor(progress * slideCount);
					
					// Clamp index
					if (activeIndex >= slideCount) activeIndex = slideCount - 1;
					
					slides.forEach((slide, index) => {
						if (index === activeIndex) {
							slide.classList.remove('opacity-0', 'z-0');
							slide.classList.add('opacity-100', 'z-10');
						} else {
							slide.classList.remove('opacity-100', 'z-10');
							slide.classList.add('opacity-0', 'z-0');
						}
					});
				});
			}

			// Initialize
			initScroll();
			document.addEventListener('astro:page-load', initScroll);
		</script>

		<!-- Suite Highlights & Hotel Services -->

		<!-- Booking Details Section -->
		<section class="py-24 bg-beige/30 relative overflow-hidden">
			<div class="max-w-7xl mx-auto px-6">
				<div class="text-center mb-16">
					<p class="text-[12px] uppercase tracking-[0.4em] text-terracotta font-bold mb-6 animate-fade-in-down">Booking Information</p>
					<h2 class="text-4xl md:text-5xl lg:text-6xl font-display text-brown leading-tight animate-fade-in-up">
						Important Details for Your Stay
					</h2>
				</div>

				<div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
					<!-- Check-in & Check-out -->
					<div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in-up">
						<div class="flex items-center justify-center w-16 h-16 bg-terracotta/10 rounded-full mb-6 mx-auto">
							<Clock class="w-8 h-8 text-terracotta" />
						</div>
						<h3 class="text-2xl font-display text-brown text-center mb-4">Check-in & Check-out</h3>
						<div class="space-y-3 text-center">
							<div class="flex justify-between items-center py-2 px-4 bg-beige/50 rounded-lg">
								<span class="text-brown font-medium">Check-in:</span>
								<span class="text-terracotta font-bold">2:00 PM</span>
							</div>
							<div class="flex justify-between items-center py-2 px-4 bg-beige/50 rounded-lg">
								<span class="text-brown font-medium">Check-out:</span>
								<span class="text-terracotta font-bold">11:00 AM</span>
							</div>
						</div>
					</div>

					<!-- Cancellation Policy -->
					<div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in-up" style="animation-delay: 0.2s;">
						<div class="flex items-center justify-center w-16 h-16 bg-terracotta/10 rounded-full mb-6 mx-auto">
							<Shield class="w-8 h-8 text-terracotta" />
						</div>
						<h3 class="text-2xl font-display text-brown text-center mb-4">Cancellation Policy</h3>
						<div class="space-y-3">
							<div class="flex items-start space-x-3">
								<div class="w-2 h-2 bg-terracotta rounded-full mt-2 flex-shrink-0"></div>
								<p class="text-brown/80 leading-relaxed">Free cancellation up to 48 hours before arrival</p>
							</div>
							<div class="flex items-start space-x-3">
								<div class="w-2 h-2 bg-terracotta rounded-full mt-2 flex-shrink-0"></div>
								<p class="text-brown/80 leading-relaxed">Late cancellation incurs a 1-night charge</p>
							</div>
						</div>
					</div>

					<!-- Included Extras -->
					<div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in-up" style="animation-delay: 0.4s;">
						<div class="flex items-center justify-center w-16 h-16 bg-terracotta/10 rounded-full mb-6 mx-auto">
							<Gift class="w-8 h-8 text-terracotta" />
						</div>
						<h3 class="text-2xl font-display text-brown text-center mb-4">Included Extras</h3>
						<div class="space-y-3">
							<div class="text-center">
								<span class="text-brown/80">Free Wi-Fi</span>
							</div>
							<div class="text-center">
								<span class="text-brown/80">Secure parking</span>
							</div>
							<div class="text-center">
								<span class="text-brown/80">Complimentary breakfast</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Testimonial Section -->
		<TestimonialSection />
		
	</div>
</BaseLayout>


